<body>
  <nav class="navbar navbar-expand-md fixed-top navbar-shrink py-3" id="mainNav">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="/"><span>SopraFormation</span></a>
      <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1">
        <span class="visually-hidden">Toggle navigation</span>
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navcol-1">
        <ul class="navbar-nav mx-auto"></ul>
        <a class="btn btn-primary shadow" role="button" routerLink="/login" routerLinkActive="active">Se connecter </a>
      </div>
    </div>
  </nav>
  <section class="py-4 py-md-5 my-5">
    <div class="container py-md-5">
      <div class="row">
        <div class="col-md-6 text-center">
          <img class="img-fluid w-100" src="assets/img/illustrations/register.svg" alt="Register">
        </div>
        <div class="col-md-5 col-xl-4 text-center text-md-start">
          <h2 class="display-6 fw-bold mb-5">
            <span class="underline pb-1"><strong>S'inscrire</strong></span>
          </h2>
          <!-- Affichage d'un message d'erreur général -->
          <div *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
          </div>
          <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" data-bs-theme="light">
            <div class="mb-3">
              <input
                class="shadow-sm form-control"
                type="text"
                formControlName="firstname"
                placeholder="Nom">
              <div *ngIf="isFieldInvalid('firstname')" class="text-danger small">
                Le prénom est obligatoire.
              </div>
            </div>
            <div class="mb-3">
              <input
                class="shadow-sm form-control"
                type="text"
                formControlName="lastname"
                placeholder="Prenom">
              <div *ngIf="isFieldInvalid('lastname')" class="text-danger small">
                Le nom est obligatoire.
              </div>
            </div>
            <div class="mb-3">
              <input
                class="shadow-sm form-control"
                type="email"
                formControlName="email"
                placeholder="Email">
              <div *ngIf="isFieldInvalid('email')" class="text-danger small">
                <!-- On peut détailler plusieurs types d'erreurs -->
                <div *ngIf="signupForm.get('email')?.errors?.['required']">L'email est obligatoire.</div>
                <div *ngIf="signupForm.get('email')?.errors?.['email']">Format d'email invalide.</div>
              </div>
            </div>
            <div class="mb-3">
              <input
                class="shadow-sm form-control"
                type="password"
                formControlName="password"
                placeholder="Mot de passe">
              <div *ngIf="isFieldInvalid('password')" class="text-danger small">
                Le mot de passe est obligatoire.
              </div>
            </div>
            <div class="mb-3">
              <input
                class="shadow-sm form-control"
                type="password"
                formControlName="password_repeat"
                placeholder="Mot de passe (confirmation)">
              <div *ngIf="isFieldInvalid('password_repeat')" class="text-danger small">
                La confirmation du mot de passe est obligatoire.
              </div>
            </div>
            <div class="mb-5">
              <button class="btn btn-primary shadow" type="submit">Créer un compte</button>
            </div>
          </form>
          <p class="text-muted">
            Se connecter
            <a routerLink="/login" routerLinkActive="active">
              Se connecter &nbsp;
              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"
                class="icon icon-tabler icon-tabler-arrow-narrow-right">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M5 12l14 0"></path>
                <path d="M15 16l4 -4"></path>
                <path d="M15 8l4 4"></path>
              </svg>
            </a>
          </p>
        </div>
      </div>
    </div>
  </section>
</body>
