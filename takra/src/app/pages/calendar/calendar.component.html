<!-- Calendar Display -->
<div>
  <full-calendar [options]="calendarOptions"></full-calendar>
</div>

<!-- Modal for Adding an Event -->
<div
  class="modal"
  tabindex="-1"
  [ngClass]="{ show: showModal }"
  style="display: block"
  *ngIf="showModal"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Event</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="eventForm" (ngSubmit)="onSubmit()">
          <!-- Event Name -->
          <div class="mb-3">
            <label for="title" class="form-label">Event Name</label>
            <input
              type="text"
              id="title"
              class="form-control"
              formControlName="title"
              placeholder="Enter event name"
            />
          </div>

          <!-- Event Date -->
          <div class="mb-3">
            <label for="date" class="form-label">Event Date</label>
            <input
              type="date"
              id="date"
              class="form-control"
              formControlName="date"
            />
          </div>

          <!-- Description -->
          <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea
              id="description"
              class="form-control"
              formControlName="description"
              rows="3"
              placeholder="Enter event description"
            ></textarea>
          </div>

          <!-- durationInHours -->
          <div class="mb-3">
            <label for="durationInHours" class="form-label">durationInHours (hours)</label>
            <input
              type="number"
              id="durationInHours"
              class="form-control"
              formControlName="durationInHours"
              placeholder="Enter durationInHours"
            />
          </div>

          <!-- Main Session Details -->
          <div class="mb-3">
            <label for="room" class="form-label">Room</label>
            <input
              type="text"
              id="room"
              class="form-control"
              formControlName="room"
              placeholder="Room name/number"
            />
          </div>

          <!-- Start and End Time -->
          <div class="row mb-2">
            <div class="col">
              <label for="timeStart" class="form-label">Start Time</label>
              <input
                type="time"
                id="timeStart"
                class="form-control"
                formControlName="timeStart"
              />
            </div>
            <div class="col">
              <label for="timeEnd" class="form-label">End Time</label>
              <input
                type="time"
                id="timeEnd"
                class="form-control"
                formControlName="timeEnd"
              />
            </div>
          </div>

          <!-- Link Meet -->
          <div class="mb-2">
            <label for="linkMeet" class="form-label">Link Meet</label>
            <input
              type="text"
              id="linkMeet"
              class="form-control"
              formControlName="linkMeet"
              placeholder="Meeting link"
            />
          </div>

          <!-- Session Type (Select) -->
          <div class="mb-2">
            <label for="sessionType" class="form-label">Session Type</label>
            <select
              id="sessionType"
              class="form-select"
              formControlName="sessionType"
            >
              <option value="ONLINE">Online</option>
              <option value="OFFLINE">Offline</option>
            </select>
          </div>

          <!-- Additional Sessions Section -->
          <div formArrayName="sessions">
            <div
              *ngFor="let session of sessions.controls; let i = index"
              [formGroupName]="i"
              class="border p-3 mb-3"
            >
              <h6>Session {{ i + 1 }}</h6>

              <!-- Room -->
              <div class="mb-2">
                <label [for]="'room' + i" class="form-label">Room</label>
                <input
                  type="text"
                  [id]="'room' + i"
                  class="form-control"
                  formControlName="room"
                  placeholder="Room name/number"
                />
              </div>

              <!-- Session Date -->
              <div class="mb-2">
                <label [for]="'sessionDate' + i" class="form-label">Session Date</label>
                <input
                  type="date"
                  [id]="'sessionDate' + i"
                  class="form-control"
                  formControlName="date"
                />
              </div>

              <!-- Start and End Time -->
              <div class="row mb-2">
                <div class="col">
                  <label [for]="'timeStart' + i" class="form-label">Start Time</label>
                  <input
                    type="time"
                    [id]="'timeStart' + i"
                    class="form-control"
                    formControlName="timeStart"
                  />
                </div>
                <div class="col">
                  <label [for]="'timeEnd' + i" class="form-label">End Time</label>
                  <input
                    type="time"
                    [id]="'timeEnd' + i"
                    class="form-control"
                    formControlName="timeEnd"
                  />
                </div>
              </div>

              <!-- Link Meet -->
              <div class="mb-2">
                <label [for]="'linkMeet' + i" class="form-label">Link Meet</label>
                <input
                  type="text"
                  [id]="'linkMeet' + i"
                  class="form-control"
                  formControlName="linkMeet"
                  placeholder="Meeting link"
                />
              </div>

              <!-- Session Type (Select) -->
              <div class="mb-2">
                <label [for]="'sessionType' + i" class="form-label">Session Type</label>
                <select
                  [id]="'sessionType' + i"
                  class="form-select"
                  formControlName="sessiontype"
                >
                  <option value="ONLINE">Online</option>
                  <option value="OFFLINE">Offline</option>
                </select>
              </div>

              <!-- Remove Session Button -->
              <div class="text-end">
                <button
                  type="button"
                  class="btn btn-danger btn-sm"
                  (click)="removeSession(i)"
                >
                  Remove Session
                </button>
              </div>
            </div>
          </div>

          <!-- Button to Add Another Session -->
          <div class="mb-3">
            <button type="button" class="btn btn-info" (click)="addSession()">
              Ajouter autre session
            </button>
          </div>

          <!-- Form Buttons -->
          <div class="text-end">
            <button
              type="button"
              class="btn btn-secondary me-2"
              (click)="closeModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-success">
              Add Event
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
